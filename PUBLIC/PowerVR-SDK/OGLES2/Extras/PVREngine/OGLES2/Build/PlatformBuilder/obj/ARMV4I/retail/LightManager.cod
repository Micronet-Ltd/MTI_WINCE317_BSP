; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PUBLIC\PowerVR-SDK\OGLES2\Extras\PVREngine\LightManager.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|?c_i32DefaultSize@?$dynamicArray@PAVLight@pvrengine@@@@2HB| [ DATA ] ; dynamicArray<pvrengine::Light *>::c_i32DefaultSize

  00000			 AREA	 |.rdata|, DATA, READONLY
|?c_i32DefaultSize@?$dynamicArray@PAVLight@pvrengine@@@@2HB| DCD 0x8 ; dynamicArray<pvrengine::Light *>::c_i32DefaultSize
	EXPORT	|??0PVRTVec3@@QAA@MMM@Z|		; PVRTVec3::PVRTVec3
; File c:\wince600\public\powervr-sdk\ogles2\tools\pvrtvector.h

  00000			 AREA	 |.pdata|, PDATA
|$T36454| DCD	|$LN5@PVRTVec3|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0PVRTVec3@@QAA@MMM@Z| PROC		; PVRTVec3::PVRTVec3

; 338  : 	PVRTVec3(VERTTYPE fX, VERTTYPE fY, VERTTYPE fZ)

  00000		 |$LN5@PVRTVec3|
  00000		 |$M36451|

; 339  : 	{
; 340  : 		x = fX;	y = fY;	z = fZ;

  00000	e880000e	 stmia       r0, {r1 - r3}

; 341  : 	}

  00004	e12fff1e	 bx          lr
  00008		 |$M36452|

			 ENDP  ; |??0PVRTVec3@@QAA@MMM@Z|, PVRTVec3::PVRTVec3

	EXPORT	|??0PVRTVec3@@QAA@PBM@Z|		; PVRTVec3::PVRTVec3

  00000			 AREA	 |.pdata|, PDATA
|$T36465| DCD	|$LN5@PVRTVec3@2|
	DCD	0x40000800
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0PVRTVec3@@QAA@PBM@Z| PROC		; PVRTVec3::PVRTVec3

; 356  : 	PVRTVec3(const VERTTYPE* pVec)

  00000		 |$LN5@PVRTVec3@2|
  00000		 |$M36462|
  00000	e1a02000	 mov         r2, r0

; 357  : 	{
; 358  : 		x = (*pVec++); y = (*pVec++); z = *pVec;

  00004	e4913004	 ldr         r3, [r1], #4

; 359  : 	}

  00008	e5823000	 str         r3, [r2]
  0000c	e5913000	 ldr         r3, [r1]
  00010	e5823004	 str         r3, [r2, #4]
  00014	e5913004	 ldr         r3, [r1, #4]
  00018	e5823008	 str         r3, [r2, #8]
  0001c	e12fff1e	 bx          lr
  00020		 |$M36463|

			 ENDP  ; |??0PVRTVec3@@QAA@PBM@Z|, PVRTVec3::PVRTVec3

	EXPORT	|??0?$CPVRTSingleton@VLightManager@pvrengine@@@@IAA@XZ| ; CPVRTSingleton<pvrengine::LightManager>::CPVRTSingleton<pvrengine::LightManager>
	EXPORT	|??_7?$CPVRTSingleton@VLightManager@pvrengine@@@@6B@| [ DATA ] ; CPVRTSingleton<pvrengine::LightManager>::`vftable'
	IMPORT	|??_E?$CPVRTSingleton@VLightManager@pvrengine@@@@MAAPAXI@Z|, WEAK |??_G?$CPVRTSingleton@VLightManager@pvrengine@@@@MAAPAXI@Z| ; CPVRTSingleton<pvrengine::LightManager>::`vector deleting destructor', CPVRTSingleton<pvrengine::LightManager>::`scalar deleting destructor'
; File c:\wince600\public\powervr-sdk\ogles2\tools\pvrtsingleton.h

  00000			 AREA	 |.pdata|, PDATA
|$T36475| DCD	|$LN5@CPVRTSingl|
	DCD	0x40000500

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7?$CPVRTSingleton@VLightManager@pvrengine@@@@6B@| DCD |??_E?$CPVRTSingleton@VLightManager@pvrengine@@@@MAAPAXI@Z| ; CPVRTSingleton<pvrengine::LightManager>::`vftable'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0?$CPVRTSingleton@VLightManager@pvrengine@@@@IAA@XZ| PROC ; CPVRTSingleton<pvrengine::LightManager>::CPVRTSingleton<pvrengine::LightManager>

; 37   : 	CPVRTSingleton() {};

  00000		 |$LN5@CPVRTSingl|
  00000		 |$M36472|
  00000	e1a02000	 mov         r2, r0
  00004	e59f3004	 ldr         r3, [pc, #4]
  00008	e5823000	 str         r3, [r2]
  0000c	e12fff1e	 bx          lr
  00010		 |$LN6@CPVRTSingl|
  00010		 |$LN7@CPVRTSingl|
  00010	00000000	 DCD         |??_7?$CPVRTSingleton@VLightManager@pvrengine@@@@6B@|
  00014		 |$M36473|

			 ENDP  ; |??0?$CPVRTSingleton@VLightManager@pvrengine@@@@IAA@XZ|, CPVRTSingleton<pvrengine::LightManager>::CPVRTSingleton<pvrengine::LightManager>

	EXPORT	|??1?$CPVRTSingleton@VLightManager@pvrengine@@@@MAA@XZ| ; CPVRTSingleton<pvrengine::LightManager>::~CPVRTSingleton<pvrengine::LightManager>

  00000			 AREA	 |.pdata|, PDATA
|$T36485| DCD	|$LN5@CPVRTSingl@2|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1?$CPVRTSingleton@VLightManager@pvrengine@@@@MAA@XZ| PROC ; CPVRTSingleton<pvrengine::LightManager>::~CPVRTSingleton<pvrengine::LightManager>

; 38   : 	virtual ~CPVRTSingleton() {};

  00000		 |$LN5@CPVRTSingl@2|
  00000		 |$M36482|
  00000	e59f3004	 ldr         r3, [pc, #4]
  00004	e5803000	 str         r3, [r0]
  00008	e12fff1e	 bx          lr
  0000c		 |$LN6@CPVRTSingl@2|
  0000c		 |$LN7@CPVRTSingl@2|
  0000c	00000000	 DCD         |??_7?$CPVRTSingleton@VLightManager@pvrengine@@@@6B@|
  00010		 |$M36483|

			 ENDP  ; |??1?$CPVRTSingleton@VLightManager@pvrengine@@@@MAA@XZ|, CPVRTSingleton<pvrengine::LightManager>::~CPVRTSingleton<pvrengine::LightManager>

	EXPORT	|??0?$dynamicArray@PAVLight@pvrengine@@@@QAA@XZ| ; dynamicArray<pvrengine::Light *>::dynamicArray<pvrengine::Light *>
	IMPORT	|??2@YAPAXI@Z|				; operator new
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\include\dynamicarray.h

  00000			 AREA	 |.pdata|, PDATA
|$T36498| DCD	|$LN5@dynamicArr|
	DCD	0x40000c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0?$dynamicArray@PAVLight@pvrengine@@@@QAA@XZ| PROC ; dynamicArray<pvrengine::Light *>::dynamicArray<pvrengine::Light *>

; 57   : 	{

  00000		 |$LN5@dynamicArr|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M36495|
  00004	e1a04000	 mov         r4, r0
  00008	e3a03000	 mov         r3, #0
  0000c	e3a02008	 mov         r2, #8

; 58   : 		m_pArray = new T[c_i32DefaultSize];

  00010	e3a00020	 mov         r0, #0x20
  00014	e5843000	 str         r3, [r4]
  00018	e5842004	 str         r2, [r4, #4]
  0001c	eb000000	 bl          |??2@YAPAXI@Z|
  00020	e5840008	 str         r0, [r4, #8]

; 59   : 	}

  00024	e1a00004	 mov         r0, r4
  00028	e8bd4010	 ldmia       sp!, {r4, lr}
  0002c	e12fff1e	 bx          lr
  00030		 |$M36496|

			 ENDP  ; |??0?$dynamicArray@PAVLight@pvrengine@@@@QAA@XZ|, dynamicArray<pvrengine::Light *>::dynamicArray<pvrengine::Light *>

	EXPORT	|??1?$dynamicArray@PAVLight@pvrengine@@@@QAA@XZ| ; dynamicArray<pvrengine::Light *>::~dynamicArray<pvrengine::Light *>
	IMPORT	|??3@YAXPAX@Z|				; operator delete

  00000			 AREA	 |.pdata|, PDATA
|$T36507| DCD	|$LN6@dynamicArr@2|
	DCD	0x40000701
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1?$dynamicArray@PAVLight@pvrengine@@@@QAA@XZ| PROC ; dynamicArray<pvrengine::Light *>::~dynamicArray<pvrengine::Light *>

; 113  : 	{

  00000		 |$LN6@dynamicArr@2|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M36504|

; 114  : 		if(m_pArray)

  00004	e5903008	 ldr         r3, [r0, #8]
  00008	e3530000	 cmp         r3, #0

; 115  : 			delete[](m_pArray);

  0000c	11a00003	 movne       r0, r3
  00010	1b000000	 blne        |??3@YAXPAX@Z|

; 116  : 	}

  00014	e49de004	 ldr         lr, [sp], #4
  00018	e12fff1e	 bx          lr
  0001c		 |$M36505|

			 ENDP  ; |??1?$dynamicArray@PAVLight@pvrengine@@@@QAA@XZ|, dynamicArray<pvrengine::Light *>::~dynamicArray<pvrengine::Light *>

	EXPORT	|?append@?$dynamicArray@PAVLight@pvrengine@@@@QAAXPAVLight@pvrengine@@@Z| ; dynamicArray<pvrengine::Light *>::append

  00000			 AREA	 |.pdata|, PDATA
|$T36525| DCD	|$LN13@append|
	DCD	0x40002401
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?append@?$dynamicArray@PAVLight@pvrengine@@@@QAAXPAVLight@pvrengine@@@Z| PROC ; dynamicArray<pvrengine::Light *>::append

; 126  : 	{

  00000		 |$LN13@append|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M36522|
  00004	e1a05001	 mov         r5, r1
  00008	e1a04000	 mov         r4, r0

; 127  : 		if(m_i32Size==m_i32Capacity)		// should never be >

  0000c	e5942004	 ldr         r2, [r4, #4]
  00010	e5943000	 ldr         r3, [r4]
  00014	e1530002	 cmp         r3, r2
  00018	1a000014	 bne         |$LN4@append|

; 128  : 		{	// expand array: expensive
; 129  : 
; 130  : 			m_i32Capacity*=2;	// array doubles in size for each expansion

  0001c	e1a03082	 mov         r3, r2, lsl #1

; 131  : 			T *pDeadArray,*pNewArray = new T[m_i32Capacity]; // make new array

  00020	e3730107	 cmn         r3, #7, 2
  00024	91a00103	 movls       r0, r3, lsl #2
  00028	83e00000	 mvnhi       r0, #0
  0002c	e5843004	 str         r3, [r4, #4]
  00030	eb000000	 bl          |??2@YAPAXI@Z|

; 132  : 
; 133  : 			// copy old values to new array
; 134  : 			for(int i=0;i<m_i32Size;i++)

  00034	e5943000	 ldr         r3, [r4]
  00038	e1a01000	 mov         r1, r0
  0003c	e3a02000	 mov         r2, #0
  00040	e3530000	 cmp         r3, #0
  00044	da000006	 ble         |$LN1@append|
  00048		 |$LL3@append|

; 135  : 			{
; 136  : 				pNewArray[i]=m_pArray[i];

  00048	e5943008	 ldr         r3, [r4, #8]
  0004c	e7933102	 ldr         r3, [r3, +r2, lsl #2]
  00050	e7813102	 str         r3, [r1, +r2, lsl #2]
  00054	e5943000	 ldr         r3, [r4]
  00058	e2822001	 add         r2, r2, #1
  0005c	e1520003	 cmp         r2, r3
  00060	bafffff8	 blt         |$LL3@append|
  00064		 |$LN1@append|

; 137  : 			}
; 138  : 
; 139  : 
; 140  : 			pDeadArray = m_pArray;

  00064	e5940008	 ldr         r0, [r4, #8]

; 141  : 			m_pArray = pNewArray;

  00068	e5841008	 str         r1, [r4, #8]

; 142  : 			delete[](pDeadArray);

  0006c	eb000000	 bl          |??3@YAXPAX@Z|
  00070		 |$LN4@append|

; 143  : 		}
; 144  : 		// add new element to end of array
; 145  : 
; 146  : 		m_pArray[m_i32Size] = addT;

  00070	e5942000	 ldr         r2, [r4]
  00074	e5943008	 ldr         r3, [r4, #8]
  00078	e7835102	 str         r5, [r3, +r2, lsl #2]

; 147  : 		m_i32Size++;

  0007c	e5943000	 ldr         r3, [r4]
  00080	e2833001	 add         r3, r3, #1
  00084	e5843000	 str         r3, [r4]

; 148  : 	}

  00088	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0008c	e12fff1e	 bx          lr
  00090		 |$M36523|

			 ENDP  ; |?append@?$dynamicArray@PAVLight@pvrengine@@@@QAAXPAVLight@pvrengine@@@Z|, dynamicArray<pvrengine::Light *>::append

	EXPORT	|??A?$dynamicArray@PAVLight@pvrengine@@@@QAAAAPAVLight@pvrengine@@H@Z| ; dynamicArray<pvrengine::Light *>::operator[]

  00000			 AREA	 |.pdata|, PDATA
|$T36536| DCD	|$LN5@operator|
	DCD	0x40000300
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??A?$dynamicArray@PAVLight@pvrengine@@@@QAAAAPAVLight@pvrengine@@H@Z| PROC ; dynamicArray<pvrengine::Light *>::operator[]

; 216  : 	{

  00000		 |$LN5@operator|
  00000		 |$M36533|

; 217  : 		_ASSERT(i32Index<m_i32Capacity);
; 218  : 		return m_pArray[i32Index];

  00000	e5903008	 ldr         r3, [r0, #8]
  00004	e0830101	 add         r0, r3, r1, lsl #2

; 219  : 	}

  00008	e12fff1e	 bx          lr
  0000c		 |$M36534|

			 ENDP  ; |??A?$dynamicArray@PAVLight@pvrengine@@@@QAAAAPAVLight@pvrengine@@H@Z|, dynamicArray<pvrengine::Light *>::operator[]

	EXPORT	|?getSize@?$dynamicArray@PAVLight@pvrengine@@@@QBAIXZ| ; dynamicArray<pvrengine::Light *>::getSize

  00000			 AREA	 |.pdata|, PDATA
|$T36546| DCD	|$LN5@getSize|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?getSize@?$dynamicArray@PAVLight@pvrengine@@@@QBAIXZ| PROC ; dynamicArray<pvrengine::Light *>::getSize

; 240  : 	{

  00000		 |$LN5@getSize|
  00000		 |$M36543|

; 241  : 		return m_i32Size;

  00000	e5900000	 ldr         r0, [r0]

; 242  : 	}

  00004	e12fff1e	 bx          lr
  00008		 |$M36544|

			 ENDP  ; |?getSize@?$dynamicArray@PAVLight@pvrengine@@@@QBAIXZ|, dynamicArray<pvrengine::Light *>::getSize

	EXPORT	|?expandToSize@?$dynamicArray@PAVLight@pvrengine@@@@QAAXH@Z| ; dynamicArray<pvrengine::Light *>::expandToSize

  00000			 AREA	 |.pdata|, PDATA
|$T36564| DCD	|$LN13@expandToSi|
	DCD	0x40001c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?expandToSize@?$dynamicArray@PAVLight@pvrengine@@@@QAAXH@Z| PROC ; dynamicArray<pvrengine::Light *>::expandToSize

; 260  : 	{

  00000		 |$LN13@expandToSi|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M36561|
  00004	e1a05001	 mov         r5, r1
  00008	e1a04000	 mov         r4, r0

; 261  : 		if(i32Size<=m_i32Capacity)

  0000c	e5943004	 ldr         r3, [r4, #4]
  00010	e1550003	 cmp         r5, r3
  00014	da000013	 ble         |$LN5@expandToSi|

; 262  : 			return;	// nothing to be done
; 263  : 
; 264  : 		T *pDeadArray,*pNewArray = new T[i32Size]; // make new array

  00018	e3750107	 cmn         r5, #7, 2
  0001c	91a00105	 movls       r0, r5, lsl #2
  00020	83e00000	 mvnhi       r0, #0
  00024	eb000000	 bl          |??2@YAPAXI@Z|

; 265  : 
; 266  : 		// copy old values to new array
; 267  : 		for(int i=0;i<m_i32Size;i++)

  00028	e5943000	 ldr         r3, [r4]
  0002c	e1a01000	 mov         r1, r0
  00030	e3a02000	 mov         r2, #0
  00034	e3530000	 cmp         r3, #0
  00038	da000006	 ble         |$LN1@expandToSi|
  0003c		 |$LL3@expandToSi|

; 268  : 		{
; 269  : 			pNewArray[i]=m_pArray[i];

  0003c	e5943008	 ldr         r3, [r4, #8]
  00040	e7933102	 ldr         r3, [r3, +r2, lsl #2]
  00044	e7813102	 str         r3, [r1, +r2, lsl #2]
  00048	e5943000	 ldr         r3, [r4]
  0004c	e2822001	 add         r2, r2, #1
  00050	e1520003	 cmp         r2, r3
  00054	bafffff8	 blt         |$LL3@expandToSi|
  00058		 |$LN1@expandToSi|

; 270  : 		}
; 271  : 
; 272  : 		m_i32Capacity=i32Size;
; 273  : 		pDeadArray = m_pArray;

  00058	e5940008	 ldr         r0, [r4, #8]
  0005c	e5845004	 str         r5, [r4, #4]

; 274  : 		m_pArray = pNewArray;

  00060	e5841008	 str         r1, [r4, #8]

; 275  : 		delete[](pDeadArray);

  00064	eb000000	 bl          |??3@YAXPAX@Z|
  00068		 |$LN5@expandToSi|

; 276  : 	}

  00068	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0006c	e12fff1e	 bx          lr
  00070		 |$M36562|

			 ENDP  ; |?expandToSize@?$dynamicArray@PAVLight@pvrengine@@@@QAAXH@Z|, dynamicArray<pvrengine::Light *>::expandToSize


  00000			 AREA	 |.pdata|, PDATA
|$T36578| DCD	|$LN8@scalar|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_G?$CPVRTSingleton@VLightManager@pvrengine@@@@MAAPAXI@Z| PROC ; CPVRTSingleton<pvrengine::LightManager>::`scalar deleting destructor'
  00000		 |$LN8@scalar|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M36575|
  00004	e1a04000	 mov         r4, r0
  00008	e59f3014	 ldr         r3, [pc, #0x14]
  0000c	e3110001	 tst         r1, #1
  00010	e5843000	 str         r3, [r4]
  00014	1b000000	 blne        |??3@YAXPAX@Z|
  00018	e1a00004	 mov         r0, r4
  0001c	e8bd4010	 ldmia       sp!, {r4, lr}
  00020	e12fff1e	 bx          lr
  00024		 |$LN9@scalar|
  00024		 |$LN10@scalar|
  00024	00000000	 DCD         |??_7?$CPVRTSingleton@VLightManager@pvrengine@@@@6B@|
  00028		 |$M36576|

			 ENDP  ; |??_G?$CPVRTSingleton@VLightManager@pvrengine@@@@MAAPAXI@Z|, CPVRTSingleton<pvrengine::LightManager>::`scalar deleting destructor'

	EXPORT	|??0LightManager@pvrengine@@QAA@XZ|	; pvrengine::LightManager::LightManager
	EXPORT	|??_7LightManager@pvrengine@@6B@| [ DATA ] ; pvrengine::LightManager::`vftable'
	IMPORT	|??_ELightManager@pvrengine@@UAAPAXI@Z|, WEAK |??_GLightManager@pvrengine@@UAAPAXI@Z| ; pvrengine::LightManager::`vector deleting destructor', pvrengine::LightManager::`scalar deleting destructor'

  00000			 AREA	 |.pdata|, PDATA
|$T36600| DCD	|$LN9@LightManag|
	DCD	0x40000f01

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7LightManager@pvrengine@@6B@| DCD |??_ELightManager@pvrengine@@UAAPAXI@Z| ; pvrengine::LightManager::`vftable'
; Function compile flags: /Ogspy
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\lightmanager.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0LightManager@pvrengine@@QAA@XZ| PROC ; pvrengine::LightManager::LightManager

; 25   : 	{

  00000		 |$LN9@LightManag|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M36597|
  00004	e1a05000	 mov         r5, r0
  00008	e59f3028	 ldr         r3, [pc, #0x28]
  0000c	e1a04005	 mov         r4, r5
  00010	e3a02000	 mov         r2, #0
  00014	e4843004	 str         r3, [r4], #4
  00018	e3a03008	 mov         r3, #8
  0001c	e3a00020	 mov         r0, #0x20
  00020	e884000c	 stmia       r4, {r2, r3}
  00024	eb000000	 bl          |??2@YAPAXI@Z|
  00028	e5840008	 str         r0, [r4, #8]

; 26   : 	}

  0002c	e1a00005	 mov         r0, r5
  00030	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00034	e12fff1e	 bx          lr
  00038		 |$LN10@LightManag|
  00038		 |$LN11@LightManag|
  00038	00000000	 DCD         |??_7LightManager@pvrengine@@6B@|
  0003c		 |$M36598|

			 ENDP  ; |??0LightManager@pvrengine@@QAA@XZ|, pvrengine::LightManager::LightManager

	EXPORT	|??1LightManager@pvrengine@@UAA@XZ|	; pvrengine::LightManager::~LightManager
; File c:\wince600\public\powervr-sdk\ogles2\tools\pvrtsingleton.h

  00000			 AREA	 |.pdata|, PDATA
|$T36638| DCD	|$LN24@LightManag@2|
	DCD	0x40002001
; Function compile flags: /Ogspy
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\lightmanager.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1LightManager@pvrengine@@UAA@XZ| PROC ; pvrengine::LightManager::~LightManager

; 31   : 	{

  00000		 |$LN24@LightManag@2|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004		 |$M36635|
  00004	e1a04000	 mov         r4, r0

; 32   : 		for(unsigned int i=0;i<m_daLights.getSize();++i)

  00008	e5943004	 ldr         r3, [r4, #4]
  0000c	e59f2068	 ldr         r2, [pc, #0x68]
  00010	e3a05000	 mov         r5, #0
  00014	e3530000	 cmp         r3, #0
  00018	e5842000	 str         r2, [r4]
  0001c	0a00000d	 beq         |$LN2@LightManag@2|
  00020	e3a07000	 mov         r7, #0
  00024		 |$LL4@LightManag@2|
  00024	e594300c	 ldr         r3, [r4, #0xC]
  00028	e1a06105	 mov         r6, r5, lsl #2
  0002c	e1a02006	 mov         r2, r6

; 33   : 		{
; 34   : 			PVRDELETE(m_daLights[i]);

  00030	e7b23003	 ldr         r3, [r2, +r3]!
  00034	e3530000	 cmp         r3, #0
  00038	15920000	 ldrne       r0, [r2]
  0003c	1b000000	 blne        |??3@YAXPAX@Z|
  00040	e594300c	 ldr         r3, [r4, #0xC]
  00044	e2855001	 add         r5, r5, #1
  00048	e7867003	 str         r7, [r6, +r3]
  0004c	e5943004	 ldr         r3, [r4, #4]
  00050	e1550003	 cmp         r5, r3
  00054	3afffff2	 bcc         |$LL4@LightManag@2|
  00058		 |$LN2@LightManag@2|

; 35   : 		}
; 36   : 	}

  00058	e594300c	 ldr         r3, [r4, #0xC]
  0005c	e3530000	 cmp         r3, #0
  00060	11a00003	 movne       r0, r3
  00064	1b000000	 blne        |??3@YAXPAX@Z|
  00068	e59f3008	 ldr         r3, [pc, #8]
  0006c	e5843000	 str         r3, [r4]
  00070	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  00074	e12fff1e	 bx          lr
  00078		 |$LN25@LightManag@2|
  00078		 |$LN26@LightManag@2|
  00078	00000000	 DCD         |??_7?$CPVRTSingleton@VLightManager@pvrengine@@@@6B@|
  0007c		 |$LN27@LightManag@2|
  0007c	00000000	 DCD         |??_7LightManager@pvrengine@@6B@|
  00080		 |$M36636|

			 ENDP  ; |??1LightManager@pvrengine@@UAA@XZ|, pvrengine::LightManager::~LightManager

	EXPORT	|??0LightManager@pvrengine@@QAA@H@Z|	; pvrengine::LightManager::LightManager
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\include\dynamicarray.h

  00000			 AREA	 |.pdata|, PDATA
|$T36662| DCD	|$LN9@LightManag@3|
	DCD	0x40001401
; Function compile flags: /Ogspy
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\lightmanager.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0LightManager@pvrengine@@QAA@H@Z| PROC ; pvrengine::LightManager::LightManager

; 41   : 	{

  00000		 |$LN9@LightManag@3|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M36659|
  00004	e1a05001	 mov         r5, r1
  00008	e1a06000	 mov         r6, r0
  0000c	e59f3038	 ldr         r3, [pc, #0x38]
  00010	e1a04006	 mov         r4, r6
  00014	e3a02000	 mov         r2, #0
  00018	e4843004	 str         r3, [r4], #4
  0001c	e3a03008	 mov         r3, #8
  00020	e3a00020	 mov         r0, #0x20
  00024	e884000c	 stmia       r4, {r2, r3}
  00028	eb000000	 bl          |??2@YAPAXI@Z|
  0002c	e1a03000	 mov         r3, r0

; 42   : 		m_daLights.expandToSize(i32MaxTextures);

  00030	e1a00004	 mov         r0, r4
  00034	e1a01005	 mov         r1, r5
  00038	e5843008	 str         r3, [r4, #8]
  0003c	eb000000	 bl          |?expandToSize@?$dynamicArray@PAVLight@pvrengine@@@@QAAXH@Z|

; 43   : 	}

  00040	e1a00006	 mov         r0, r6
  00044	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00048	e12fff1e	 bx          lr
  0004c		 |$LN10@LightManag@3|
  0004c		 |$LN11@LightManag@3|
  0004c	00000000	 DCD         |??_7LightManager@pvrengine@@6B@|
  00050		 |$M36660|

			 ENDP  ; |??0LightManager@pvrengine@@QAA@H@Z|, pvrengine::LightManager::LightManager

	EXPORT	|?addLight@LightManager@pvrengine@@QAAIABVCPVRTModelPOD@@I@Z| ; pvrengine::LightManager::addLight
	IMPORT	|??0LightPoint@pvrengine@@QAA@UPVRTVec4@@UPVRTVec3@@@Z| ; pvrengine::LightPoint::LightPoint
	IMPORT	|?GetLightPosition@CPVRTModelPOD@@QBA?AUPVRTVec4@@I@Z| ; CPVRTModelPOD::GetLightPosition
	IMPORT	|??0LightDirectional@pvrengine@@QAA@UPVRTVec4@@UPVRTVec3@@@Z| ; pvrengine::LightDirectional::LightDirectional
	IMPORT	|?GetLightDirection@CPVRTModelPOD@@QBA?AUPVRTVec4@@I@Z| ; CPVRTModelPOD::GetLightDirection
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\include\dynamicarray.h

  00000			 AREA	 |.pdata|, PDATA
|$T36713| DCD	|$LN21@addLight|
	DCD	0x40004702
; Function compile flags: /Ogspy
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\lightmanager.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?addLight@LightManager@pvrengine@@QAAIABVCPVRTModelPOD@@I@Z| PROC ; pvrengine::LightManager::addLight

; 48   : 	{

  00000		 |$LN21@addLight|
  00000	e92d41f0	 stmdb       sp!, {r4 - r8, lr}
  00004	e24dd030	 sub         sp, sp, #0x30
  00008		 |$M36710|
  00008	e1a04002	 mov         r4, r2
  0000c	e1a05001	 mov         r5, r1
  00010	e1a07000	 mov         r7, r0

; 49   : 		PVRTVec3 vColour(f2vt(1.0f),f2vt(1.0f),f2vt(1.0f));
; 50   : 
; 51   : 		if(i32Index<sScene.nNumLight)

  00014	e5953020	 ldr         r3, [r5, #0x20]
  00018	e1540003	 cmp         r4, r3
  0001c	2a00003a	 bcs         |$LN3@addLight|

; 52   : 		{
; 53   : 			Light *pLight;
; 54   : 			if(sScene.pLight[i32Index].eType==ePODDirectional)

  00020	e5953024	 ldr         r3, [r5, #0x24]
  00024	e0846104	 add         r6, r4, r4, lsl #2

; 55   : 			{// make directional light
; 56   : 
; 57   : 				pLight = new LightDirectional(sScene.GetLightDirection(i32Index),
; 58   : 					PVRTVec3((VERTTYPE*)&sScene.pLight[i32Index].pfColour));

  00028	e3a00020	 mov         r0, #0x20
  0002c	e0833106	 add         r3, r3, r6, lsl #2
  00030	e5933010	 ldr         r3, [r3, #0x10]
  00034	e3530001	 cmp         r3, #1
  00038	1a000016	 bne         |$LN2@addLight|
  0003c	eb000000	 bl          |??2@YAPAXI@Z|
  00040	e1b08000	 movs        r8, r0
  00044	0a00002a	 beq         |$LN8@addLight|
  00048	e5953024	 ldr         r3, [r5, #0x24]
  0004c	e1a02004	 mov         r2, r4
  00050	e28d1010	 add         r1, sp, #0x10
  00054	e0833106	 add         r3, r3, r6, lsl #2
  00058	e5b36004	 ldr         r6, [r3, #4]!
  0005c	e1a00005	 mov         r0, r5
  00060	e5b34004	 ldr         r4, [r3, #4]!
  00064	e5935004	 ldr         r5, [r3, #4]
  00068	eb000000	 bl          |?GetLightDirection@CPVRTModelPOD@@QBA?AUPVRTVec4@@I@Z|
  0006c	e590e00c	 ldr         lr, [r0, #0xC]
  00070	e5901000	 ldr         r1, [r0]
  00074	e5902004	 ldr         r2, [r0, #4]
  00078	e5903008	 ldr         r3, [r0, #8]
  0007c	e1a00008	 mov         r0, r8
  00080	e58de000	 str         lr, [sp]
  00084	e58d6004	 str         r6, [sp, #4]
  00088	e58d4008	 str         r4, [sp, #8]
  0008c	e58d500c	 str         r5, [sp, #0xC]
  00090	eb000000	 bl          |??0LightDirectional@pvrengine@@QAA@UPVRTVec4@@UPVRTVec3@@@Z|

; 59   : 			}
; 60   : 			else

  00094	ea000017	 b           |$LN9@addLight|
  00098		 |$LN2@addLight|

; 61   : 			{// make point light
; 62   : 				pLight = new LightPoint(sScene.GetLightPosition(i32Index),
; 63   : 					PVRTVec3((VERTTYPE*)&sScene.pLight[i32Index].pfColour));

  00098	eb000000	 bl          |??2@YAPAXI@Z|
  0009c	e1b08000	 movs        r8, r0
  000a0	0a000013	 beq         |$LN8@addLight|
  000a4	e5953024	 ldr         r3, [r5, #0x24]
  000a8	e1a02004	 mov         r2, r4
  000ac	e28d1020	 add         r1, sp, #0x20
  000b0	e0833106	 add         r3, r3, r6, lsl #2
  000b4	e5b36004	 ldr         r6, [r3, #4]!
  000b8	e1a00005	 mov         r0, r5
  000bc	e5b34004	 ldr         r4, [r3, #4]!
  000c0	e5935004	 ldr         r5, [r3, #4]
  000c4	eb000000	 bl          |?GetLightPosition@CPVRTModelPOD@@QBA?AUPVRTVec4@@I@Z|
  000c8	e590e00c	 ldr         lr, [r0, #0xC]
  000cc	e5901000	 ldr         r1, [r0]
  000d0	e5902004	 ldr         r2, [r0, #4]
  000d4	e5903008	 ldr         r3, [r0, #8]
  000d8	e1a00008	 mov         r0, r8
  000dc	e58de000	 str         lr, [sp]
  000e0	e58d6004	 str         r6, [sp, #4]
  000e4	e58d4008	 str         r4, [sp, #8]
  000e8	e58d500c	 str         r5, [sp, #0xC]
  000ec	eb000000	 bl          |??0LightPoint@pvrengine@@QAA@UPVRTVec4@@UPVRTVec3@@@Z|
  000f0	ea000000	 b           |$LN9@addLight|
  000f4		 |$LN8@addLight|
  000f4	e3a00000	 mov         r0, #0
  000f8		 |$LN9@addLight|

; 64   : 			}
; 65   : 			m_daLights.append(pLight);

  000f8	e1a01000	 mov         r1, r0
  000fc	e2870004	 add         r0, r7, #4
  00100	eb000000	 bl          |?append@?$dynamicArray@PAVLight@pvrengine@@@@QAAXPAVLight@pvrengine@@@Z|

; 66   : 			return m_daLights.getSize();

  00104	e5970004	 ldr         r0, [r7, #4]
  00108	ea000000	 b           |$LN4@addLight|
  0010c		 |$LN3@addLight|

; 67   : 		}
; 68   : 		return PVR_INVALID;

  0010c	e3e00000	 mvn         r0, #0
  00110		 |$LN4@addLight|

; 69   : 	}

  00110	e28dd030	 add         sp, sp, #0x30
  00114	e8bd41f0	 ldmia       sp!, {r4 - r8, lr}
  00118	e12fff1e	 bx          lr
  0011c		 |$M36711|

			 ENDP  ; |?addLight@LightManager@pvrengine@@QAAIABVCPVRTModelPOD@@I@Z|, pvrengine::LightManager::addLight

	EXPORT	|?shineLights@LightManager@pvrengine@@QAAXXZ| ; pvrengine::LightManager::shineLights
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\include\dynamicarray.h

  00000			 AREA	 |.pdata|, PDATA
|$T36731| DCD	|$LN14@shineLight|
	DCD	0x40001301
; Function compile flags: /Ogspy
; File c:\wince600\public\powervr-sdk\ogles2\extras\pvrengine\lightmanager.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?shineLights@LightManager@pvrengine@@QAAXXZ| PROC ; pvrengine::LightManager::shineLights

; 74   : 	{

  00000		 |$LN14@shineLight|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M36728|
  00004	e1a04000	 mov         r4, r0

; 75   : 		for(unsigned int i=0;i<m_daLights.getSize();i++)

  00008	e5943004	 ldr         r3, [r4, #4]
  0000c	e3a05000	 mov         r5, #0
  00010	e3530000	 cmp         r3, #0
  00014	0a00000a	 beq         |$LN1@shineLight|
  00018		 |$LL3@shineLight|

; 76   : 		{
; 77   : 			m_daLights[i]->shineLight(i);

  00018	e594300c	 ldr         r3, [r4, #0xC]
  0001c	e1a01005	 mov         r1, r5
  00020	e7930105	 ldr         r0, [r3, +r5, lsl #2]
  00024	e5903000	 ldr         r3, [r0]
  00028	e5933000	 ldr         r3, [r3]
  0002c	e1a0e00f	 mov         lr, pc
  00030	e12fff13	 bx          r3
  00034	e5943004	 ldr         r3, [r4, #4]
  00038	e2855001	 add         r5, r5, #1
  0003c	e1550003	 cmp         r5, r3
  00040	3afffff4	 bcc         |$LL3@shineLight|
  00044		 |$LN1@shineLight|

; 78   : 		}
; 79   : 	}

  00044	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00048	e12fff1e	 bx          lr
  0004c		 |$M36729|

			 ENDP  ; |?shineLights@LightManager@pvrengine@@QAAXXZ|, pvrengine::LightManager::shineLights


  00000			 AREA	 |.pdata|, PDATA
|$T36742| DCD	|$LN6@scalar@2|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GLightManager@pvrengine@@UAAPAXI@Z| PROC ; pvrengine::LightManager::`scalar deleting destructor'
  00000		 |$LN6@scalar@2|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M36739|
  00004	e1a04001	 mov         r4, r1
  00008	e1a05000	 mov         r5, r0
  0000c	eb000000	 bl          |??1LightManager@pvrengine@@UAA@XZ|
  00010	e3140001	 tst         r4, #1
  00014	11a00005	 movne       r0, r5
  00018	1b000000	 blne        |??3@YAXPAX@Z|
  0001c	e1a00005	 mov         r0, r5
  00020	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00024	e12fff1e	 bx          lr
  00028		 |$M36740|

			 ENDP  ; |??_GLightManager@pvrengine@@UAAPAXI@Z|, pvrengine::LightManager::`scalar deleting destructor'

	END
