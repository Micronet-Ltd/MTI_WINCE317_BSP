<html>
<head>
<title>
Porting Guide: Supporting a New Operating System
</title>

<style type="text/css">

<!--
/*  TwinText Style (c) PTLogica 2002 - 2004  */

 
/* Body */
body{font-family:"Verdana", sans-serif;font-size: 8pt; }

/* Body (Chapter) */
body.Main{background: #FFFFFF;color: #000000;  margin: 0;       }

/*IE 5.5 */
li, table {  font-family: "Verdana", sans-serif; font-size: 8pt;  }

/* Project Title */
div.ProjectTitle {
	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
	color: White;
	text-align: left;
	padding-bottom: 3px;
}

/* Chapter's Title */
h1{font-family:"Verdana", sans-serif;font-size: 14px;
font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 9px;    padding-top: 15px;  padding-bottom: 15px;  padding-left: 10px;  background-color: #006699;  color: White;
 border-bottom: 4px solid Black;}
 
/* Feedback */
div.Feedback {
 	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
    text-align: right;
    margin: 0px;
    padding: 2px;
    background: #EFEFEF;
    position: relative; top: -10px; left: 0px;
} 

/* Common to all section text, including first section */
div.SectionText{margin-left: 10px;margin-right: 10px;margin-top: 10px;margin-bottom: 10px;   }

/* Contents or Summary */
h2{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 5px;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}

/* Table of Contents */
div.Toc{margin-top: 30px;margin-bottom: 30px;  border: 1px solid #CCCCCC;  padding: 5px;  margin-left: 30px;  margin-right: 30px;    }
div.TocLinks{font-weight: normal;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0pt;margin-bottom: 0pt;}
ul.TocLinks{}
li.TocLink{}
a.TocLink{}

/* Summary */
div.Summary{margin-top: 20px;margin-bottom: 40px;    padding: 5px;  margin-left: 30px;  margin-right: 20px; }
table.SummaryTable{  margin-top: 15px;  margin-bottom: 15px;  background-color: transparent;                   }
tr.SummaryRow { }
td.SummaryLink{font-weight: normal;text-align: left;width: 15%;        padding: 5px;             }
td.SummaryText{text-align: left;      padding: 5px;  background-color: transparent;  color: Black;                    }
a.SummaryLink{ }

/* Sections */
div.AllSections{margin-top: 0;margin-bottom: 70px;  margin-left: 0;  margin-right: 0;  }

div.Section{margin-top: 30px;margin-bottom: 10px;}
h3{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 10px;  padding-left: 10px;  padding-bottom: 3px;  background: #6699CC;  color: White;  border-bottom: 1px solid Black;     }

/* API Box */
div.Api{font-family:"Courier New", monospace;font-size: 9pt;margin-left: 15px;margin-right: 15px;margin-top: 15px;margin-bottom: 15px;padding: 7px;color: Black;  border: 1px solid #CCCCCC;  background: transparent;  }
font.ApiName{font-weight: bold;  background-color: transparent;  color: Black;  }

/* Section Text Elements */
h4{font-family:"Verdana", sans-serif;font-size: 9pt;font-weight: bold;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}
pre{font-family:"Courier New", monospace;font-size: 11px;white-space: pre;margin-top: 7pt;margin-bottom: 7pt;  border: 1px dashed #CCCCCC;  padding: 5px;  margin-left: 5px;  margin-right: 5px;  color: Black;     }
font.HighText{ background-color: #FFFF00; color: Black;  font-weight: normal;}
ul{}
li{list-style: disc;}
a:link{text-decoration:none;color: #005499;background: transparent;}
a:visited{text-decoration:none;color: #005499;background: transparent;}
a:active{text-decoration:none;color: #005499;background: transparent;}
a:hover{text-decoration:underline;color: #005499;background: transparent;}
	
	/* Definitions Table */
table.DefTable{ margin-left: 20px;  margin-right: 20px;   }
tr.Def{  }
td.Def{font-family:"Courier New", monospace;font-size: 9pt;  font-weight: normal;   padding-left: 5px;  padding-right: 5px;      color: Black;  vertical-align: top;  white-space: nowrap;  text-align: left;            }
td.DefSep{font-family:"Courier New", monospace;font-size: 9pt;padding-right: 5pt;padding-left: 5pt;  vertical-align: top;  text-align: center;  }
td.DefText{ vertical-align: top;  text-align: left;  }

/* Copyright */
div.Copy { padding: 10px;  }

/* Footer */
div.Footer{ border-top: 1px solid #CCCCCC;  margin-top: 10px;  padding: 5px;  border-bottom: 1px solid #CCCCCC;    }

div.SourceLocation{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-bottom: 10px;  margin-left: 10px;   }
div.LastGenerated{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-left: 40px;  }


/* Navigation */
body.Side{background: #6699CC;color: White;  margin: 0px;  padding: 0px;  }
div.Side{}
/* not well supported in some versions of IE; remove background color and bottom border */
/*div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: White;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  background-color: #006699;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 5px;  border-bottom: 4px solid Black;} */
div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: #000000;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 7px; }
div.SideText{text-align: left;margin-top: 0px;margin-bottom: 5px;  margin-left: 0px;  margin-right: 0px;  padding-bottom: 9px;    padding-left: 7px;  color: #FFCC00;  background: #6699CC;  padding-top: 10px;  font-weight: bold;               }
div.SideDetail { font-family: Arial, serif;  font-size: 10pt;  font-weight: normal;  background: transparent;    margin: 0px;  background-color: transparent;  padding-top: 1px;  color: White;                              }
ul.SideDetail{     }
li.SideDetail{ white-space: nowrap;  list-style: square;        }
a.SideDetail:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
table.LinksTable{margin-top: 10px;margin-bottom: 10px; padding-left: 7px;      }
tr.SideLink{}
td.SideLink{}
a.SideLink:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }







-->

</style>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="TwinText">

</head>
<body class=Main>
<h1>
Porting Guide: Supporting a New Operating System
</h1>
<div class=Feedback><a href="mailto:support@datalight.com?subject=Documentation Feedback: FlashFX Tera SDK for Microsoft Windows CE -- v2.1.1 Build 2128DF (Win32 Host): Porting Guide: Supporting a New Operating System">Send comments on this topic.</a></div>
<div class=SectionText>

        <h4>Overview</h4>

<p>        Porting DCL to support a new operating system is relatively
        straightforward, and involves three main steps, which are:

<p>        <ul>
<li>Defining the OS characteristics in <a HREF=UD640_Headers.c.htm#dlosconf.h>dlosconf.h</a>.
        <li>Defining a default <a HREF=UD720_ProjectFiles.c.htm#dclconf.h>dclconf.h</a> file for a new project.
        <li>Implementing the OS Services layer
</ul>
        Implementation of support for a new OS implies adding a new directory
        to the \dcl\os\... tree.  Under this directory there will need to be at
        least four subdirectories, which are:

<p>        <ul>
<li>\dcl\os\wince\include
        <li>\dcl\os\wince\newproj
        <li>\dcl\os\wince\services
        <li>\dcl\os\wince\tests
</ul>
        The first step in implementing support for a new operating system is to
        choose the OS name to use.  It is recommended that the OS name be 8
        characters or less in length, and not include any spaces or an
        extension.  In the very likely event that you are also porting the
        master Datalight product to the new operating system, the name you
        choose must exactly match in both the dcl\os tree and the master
        product's OS tree.

<p>        <h4>Defining the Default OS Characteristics</h4>

<p>        The header file \dcl\os\wince\include\<a HREF=UD640_Headers.c.htm#dlosconf.h>dlosconf.h</a> defines the default
        characteristics for the operating system.  In some cases, these
        characteristics may be overridden on a project basis, by settings in
        the project's <a HREF=UD720_ProjectFiles.c.htm#dclconf.h>dclconf.h</a> file.  It is the responsibility of the
        developer implementing the port to determine which settings must be:

<p>        <ul>
<li>Fixed per OS and always hard-coded in the <a HREF=UD640_Headers.c.htm#dlosconf.h>dlosconf.h</a> file.
        <li>Custom per project, and requires OEM developer configuration in the project's <a HREF=UD720_ProjectFiles.c.htm#dclconf.h>dclconf.h</a> file.
        <li>Are flexible, and can use a default value in <a HREF=UD640_Headers.c.htm#dlosconf.h>dlosconf.h</a>, but be overridden in the project's <a HREF=UD720_ProjectFiles.c.htm#dclconf.h>dclconf.h</a> file.
</ul>
        Every Datalight SDK includes at least one OS abstraction which has
        a <a HREF=UD640_Headers.c.htm#dlosconf.h>dlosconf.h</a> file in the aforementioned location.  The <a HREF=UD640_Headers.c.htm#dlosconf.h>dlosconf.h</a> file
        from the RTOS kit is a great template to use as a starting point when
        creating a DCL abstraction for a new OS.

<p>        Some operating systems may require additional settings to be specified
        in this file.  Two examples are:

<p>        <ul>
<li>An operating system needs to override the default DCL API mappings.
        <li>An OS requires that a memory pool be set up and configured before the DCL OS Services memory management functions can be used.
</ul>
        <h4>Defining the Default Project Characteristics</h4>

<p>        The header file \dcl\os\wince\newproj\<a HREF=UD720_ProjectFiles.c.htm#dclconf.h>dclconf.h</a> defines the default
        DCL characteristics for a new project which is targeting the new
        operating system.

<p>        The <a HREF=UD720_ProjectFiles.c.htm#dclconf.h>dclconf.h</a> file from the RTOS SDK's "NewProj" directory is a good
        starting point.

<p>        <h4>Implementing an OS Services Layer</h4>

<p>        The OS Services Layer is implemented in the \dcl\os\wince\services
        directory.  Depending on the type of product you are supporting, and
        the target set of functionality, it is sometimes possible to not
        implement every one of the OS Services functions, either by leaving the
        module out entirely, or by stubbing the functionality.  Please see the
        master product's documentation for more details on this topic.

<p>        The RTOS kit has a "standard" set of OS Services implemented, which
        can be modified to suite the needs of the specific target operating
        system.

<p>        <h4>Building and Running DCLTEST</h4>

<p>        Once the preceding steps are completed, implementing and running DCLTEST successfully
        are the final steps.

<p>        DCLTEST is a Datalight test which exercises and tests DCL functionality.
        It is vital that DCLTEST be running properly and completing without
        error before attempting to use other Datalight products.  If DCLTEST
        does not pass, then there is no point in running higher level stuff.

<p>        DCLTEST is invoked by calling DclTestMain, which has the following
        prototype:

<p>                <a HREF=UD670_AdvancedDataTypes.c.htm#DCLSTATUS>DCLSTATUS</a> DclTestMain(<a HREF=UD670_AdvancedDataTypes.c.htm#DCLTOOLPARAMS>DCLTOOLPARAMS</a> *pTP)

<p>        Depending on the style of operating system to which DCL is being
        ported, typically a simple wrapper function can be implemented which
        calls DclTestMain, in an appropriate fashion.

<p>
                                                                                                    
</div>
<div class=AllSections>
</div>
<div class=Copy>Datalight FlashFX Tera SDK for Microsoft Windows CE<br>Copyright &#169; 1993-2012 Datalight, Inc.  All Rights Reserved Worldwide.</div>
</body>
</html>

