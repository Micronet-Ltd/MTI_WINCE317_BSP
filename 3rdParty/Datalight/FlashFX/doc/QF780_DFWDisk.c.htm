<html>
<head>
<title>
FlashFX API: Driver Framework: Disk
</title>

<style type="text/css">

<!--
/*  TwinText Style (c) PTLogica 2002 - 2004  */

 
/* Body */
body{font-family:"Verdana", sans-serif;font-size: 8pt; }

/* Body (Chapter) */
body.Main{background: #FFFFFF;color: #000000;  margin: 0;       }

/*IE 5.5 */
li, table {  font-family: "Verdana", sans-serif; font-size: 8pt;  }

/* Project Title */
div.ProjectTitle {
	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
	color: White;
	text-align: left;
	padding-bottom: 3px;
}

/* Chapter's Title */
h1{font-family:"Verdana", sans-serif;font-size: 14px;
font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 9px;    padding-top: 15px;  padding-bottom: 15px;  padding-left: 10px;  background-color: #006699;  color: White;
 border-bottom: 4px solid Black;}
 
/* Feedback */
div.Feedback {
 	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
    text-align: right;
    margin: 0px;
    padding: 2px;
    background: #EFEFEF;
    position: relative; top: -10px; left: 0px;
} 

/* Common to all section text, including first section */
div.SectionText{margin-left: 10px;margin-right: 10px;margin-top: 10px;margin-bottom: 10px;   }

/* Contents or Summary */
h2{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 5px;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}

/* Table of Contents */
div.Toc{margin-top: 30px;margin-bottom: 30px;  border: 1px solid #CCCCCC;  padding: 5px;  margin-left: 30px;  margin-right: 30px;    }
div.TocLinks{font-weight: normal;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0pt;margin-bottom: 0pt;}
ul.TocLinks{}
li.TocLink{}
a.TocLink{}

/* Summary */
div.Summary{margin-top: 20px;margin-bottom: 40px;    padding: 5px;  margin-left: 30px;  margin-right: 20px; }
table.SummaryTable{  margin-top: 15px;  margin-bottom: 15px;  background-color: transparent;                   }
tr.SummaryRow { }
td.SummaryLink{font-weight: normal;text-align: left;width: 15%;        padding: 5px;             }
td.SummaryText{text-align: left;      padding: 5px;  background-color: transparent;  color: Black;                    }
a.SummaryLink{ }

/* Sections */
div.AllSections{margin-top: 0;margin-bottom: 70px;  margin-left: 0;  margin-right: 0;  }

div.Section{margin-top: 30px;margin-bottom: 10px;}
h3{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 10px;  padding-left: 10px;  padding-bottom: 3px;  background: #6699CC;  color: White;  border-bottom: 1px solid Black;     }

/* API Box */
div.Api{font-family:"Courier New", monospace;font-size: 9pt;margin-left: 15px;margin-right: 15px;margin-top: 15px;margin-bottom: 15px;padding: 7px;color: Black;  border: 1px solid #CCCCCC;  background: transparent;  }
font.ApiName{font-weight: bold;  background-color: transparent;  color: Black;  }

/* Section Text Elements */
h4{font-family:"Verdana", sans-serif;font-size: 9pt;font-weight: bold;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}
pre{font-family:"Courier New", monospace;font-size: 11px;white-space: pre;margin-top: 7pt;margin-bottom: 7pt;  border: 1px dashed #CCCCCC;  padding: 5px;  margin-left: 5px;  margin-right: 5px;  color: Black;     }
font.HighText{ background-color: #FFFF00; color: Black;  font-weight: normal;}
ul{}
li{list-style: disc;}
a:link{text-decoration:none;color: #005499;background: transparent;}
a:visited{text-decoration:none;color: #005499;background: transparent;}
a:active{text-decoration:none;color: #005499;background: transparent;}
a:hover{text-decoration:underline;color: #005499;background: transparent;}
	
	/* Definitions Table */
table.DefTable{ margin-left: 20px;  margin-right: 20px;   }
tr.Def{  }
td.Def{font-family:"Courier New", monospace;font-size: 9pt;  font-weight: normal;   padding-left: 5px;  padding-right: 5px;      color: Black;  vertical-align: top;  white-space: nowrap;  text-align: left;            }
td.DefSep{font-family:"Courier New", monospace;font-size: 9pt;padding-right: 5pt;padding-left: 5pt;  vertical-align: top;  text-align: center;  }
td.DefText{ vertical-align: top;  text-align: left;  }

/* Copyright */
div.Copy { padding: 10px;  }

/* Footer */
div.Footer{ border-top: 1px solid #CCCCCC;  margin-top: 10px;  padding: 5px;  border-bottom: 1px solid #CCCCCC;    }

div.SourceLocation{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-bottom: 10px;  margin-left: 10px;   }
div.LastGenerated{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-left: 40px;  }


/* Navigation */
body.Side{background: #6699CC;color: White;  margin: 0px;  padding: 0px;  }
div.Side{}
/* not well supported in some versions of IE; remove background color and bottom border */
/*div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: White;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  background-color: #006699;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 5px;  border-bottom: 4px solid Black;} */
div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: #000000;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 7px; }
div.SideText{text-align: left;margin-top: 0px;margin-bottom: 5px;  margin-left: 0px;  margin-right: 0px;  padding-bottom: 9px;    padding-left: 7px;  color: #FFCC00;  background: #6699CC;  padding-top: 10px;  font-weight: bold;               }
div.SideDetail { font-family: Arial, serif;  font-size: 10pt;  font-weight: normal;  background: transparent;    margin: 0px;  background-color: transparent;  padding-top: 1px;  color: White;                              }
ul.SideDetail{     }
li.SideDetail{ white-space: nowrap;  list-style: square;        }
a.SideDetail:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
table.LinksTable{margin-top: 10px;margin-bottom: 10px; padding-left: 7px;      }
tr.SideLink{}
td.SideLink{}
a.SideLink:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }







-->

</style>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="TwinText">

</head>
<body class=Main>
<h1>
FlashFX API: Driver Framework: Disk
</h1>
<div class=Feedback><a href="mailto:support@datalight.com?subject=Documentation Feedback: FlashFX Tera SDK for Microsoft Windows CE -- v2.1.1 Build 2128DF (Win32 Host): FlashFX API: Driver Framework: Disk">Send comments on this topic.</a></div>
<div class=SectionText>


                                                                                                    
</div>
<div class=Summary>
<h2>
Summary
</h2>
<table class=SummaryTable>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskAllocatorSettings">FfxDriverDiskAllocatorSettings</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Initialize the Disk allocator settings from the developer
    specified configuration information in ffxconf.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskCompSettings">FfxDriverDiskCompSettings</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Initialize the Disk compaction settings from the developer
    specified configuration information in ffxconf.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskCreate">FfxDriverDiskCreate</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Create a Disk instance, calling the function <a HREF=QF960_ProjectHooks.c.htm#FfxHookDiskCreate>FfxHookDiskCreate()</a>
    to use the pDiskCreateData to obtain the Disk parameters.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskCreateParam">FfxDriverDiskCreateParam</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Create a physical Disk instance, using the parameters in the
    supplied <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskDestroy">FfxDriverDiskDestroy</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Destroy a Disk instance.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskEnumerate">FfxDriverDiskEnumerate</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Enumerates the Disks in the system.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskFormatSettings">FfxDriverDiskFormatSettings</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Initialize the Disk format settings from the developer specified
    configuration information in ffxconf.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskGeometry">FfxDriverDiskGeometry</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Report physical and logical geometry information for a Disk.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskHandle">FfxDriverDiskHandle</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Return the Disk handle for a given Disk number.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskParameterGet">FfxDriverDiskParameterGet</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Get a FlashFX system parameter.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskParameterset">FfxDriverDiskParameterset</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Set a FlashFX system parameter.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskPowerResume">FfxDriverDiskPowerResume</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Indicate to the specified Disk that a power resume operation has
    occurred.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskPowerSuspend">FfxDriverDiskPowerSuspend</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Prepare the specified Disk for a power suspend operation.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#FfxDriverDiskPtr">FfxDriverDiskPtr</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Return a pointer to the FFXDISKINFO structure, given a Disk
    handle.
</td>
</tr>
</table>
</div>
<div class=AllSections>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskAllocatorSettings"></a>
<a NAME="FfxDriverDiskAllocatorSettings"></a>
FfxDriverDiskAllocatorSettings
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskAllocatorSettings</font>(
    <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a>  *pConf)
</div>
<div class=SectionText>

    Initialize the Disk allocator settings from the developer
    specified configuration information in <a HREF=QF640_Headers.c.htm#ffxconf.h>ffxconf.h</a>.

<p>    This function supports up to 8 Disks by default, and is
    easily modified if the system needs to support more than
    that (<a HREF=QF160_ProjectSettings.c.htm#FFX_MAX_DISKS>FFX_MAX_DISKS</a> > 8).

<p>    Note that in some environments, portions of these settings
    may be specified via other means (such as the registry in
    Windows CE), and therefore #ifdef is used to ensure that
    only valid settings are configured.

<p>    Note also that because this function is used during the
    course of Disk creation, we must pass in a pointer to the
    FFXDISKINFO structure to use, rather than a Disk handle
    (since it is not known yet).

<p>    If the allocator settings for the given Disk are not
    specified, default settings will be used.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pConf
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure to use.
                The nDiskNum field must be filled in prior to
                calling this function.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> value indicating the operation result.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskCompSettings"></a>
<a NAME="FfxDriverDiskCompSettings"></a>
FfxDriverDiskCompSettings
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskCompSettings</font>(
    <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a>  *pConf)
</div>
<div class=SectionText>

    Initialize the Disk compaction settings from the developer
    specified configuration information in <a HREF=QF640_Headers.c.htm#ffxconf.h>ffxconf.h</a>.

<p>    This function supports up to 8 Disks by default, and is
    easily modified if the system needs to support more than
    that (<a HREF=QF160_ProjectSettings.c.htm#FFX_MAX_DISKS>FFX_MAX_DISKS</a> > 8).

<p>    Note that in some environments, portions of these settings
    may be specified via other means (such as the registry in
    Windows CE), and therefore #ifdef is used to ensure that
    only valid settings are configured.

<p>    Note also that because this function is used during the
    course of Disk creation, we must pass in a pointer to the
    FFXDISKINFO structure to use, rather than a Disk handle
    (since it is not known yet).

<p>    If the compaction settings for the given Disk are not
    specified, default settings will be used.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pConf
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure to use.
                The nDiskNum field must be filled in prior to
                calling this function.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> value indicating the operation result.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskCreate"></a>
<a NAME="FfxDriverDiskCreate"></a>
FfxDriverDiskCreate
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> <font class=ApiName>FfxDriverDiskCreate</font>(<br>&nbsp;&nbsp;&nbsp; 
    FFXDRIVERINFO          *pFDI,<br>&nbsp;&nbsp;&nbsp;
    FFXDISKINITDATA        *pDiskCreateData)
</div>
<div class=SectionText>

    Create a Disk instance, calling the function <a HREF=QF960_ProjectHooks.c.htm#FfxHookDiskCreate>FfxHookDiskCreate()</a>
    to use the pDiskCreateData to obtain the Disk parameters.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pFDI
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the FFXDRIVERINFO structure
                          to use.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pDiskCreateData
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the FFXDISKINITDATA structure
                          to use.  This value may only be NULL if
                          <a HREF=QF960_ProjectHooks.c.htm#FfxHookDiskCreate>FfxHookDiskCreate()</a> does not use it.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns a <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> if successful, otherwise NULL.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskCreateParam"></a>
<a NAME="FfxDriverDiskCreateParam"></a>
FfxDriverDiskCreateParam
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> <font class=ApiName>FfxDriverDiskCreateParam</font>(<br>&nbsp;&nbsp;&nbsp; 
    FFXDRIVERINFO          *pFDI,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a>          *pConf,<br>&nbsp;&nbsp;&nbsp;
    FFXDISKHOOK            *pHook)
</div>
<div class=SectionText>

    Create a physical Disk instance, using the parameters in the
    supplied <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure.

<p>    The supplied <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure may be fully, partially,
    or not at all configured.  The various "fInitedxxxSettings"
    flags must be set to indicate which settings have already been
    initialized.  Any settings which have not been initialized will
    be set to use default values, typically from <a HREF=QF640_Headers.c.htm#ffxconf.h>ffxconf.h</a>.

<p>    The contents of the <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure may be modified
    during the course of this create operation, and on exit it will
    reflect the configuration settings which were used.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pFDI
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the FFXDRIVERINFO structure to use.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pConf
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure to use.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pHook
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the FFXDISKHOOK structure returned
                by <a HREF=QF960_ProjectHooks.c.htm#FfxHookDiskCreate>FfxHookDiskCreate()</a>.  This value may be NULL
                if the DiskCreate/Destroy Project Hooks are
                not being used.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns a <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> if successful, otherwise NULL.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskDestroy"></a>
<a NAME="FfxDriverDiskDestroy"></a>
FfxDriverDiskDestroy
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskDestroy</font>(
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>   hDisk)
</div>
<div class=SectionText>

    Destroy a Disk instance.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The FFXDISKKANDLE to use
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> value indicating the operation result.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskEnumerate"></a>
<a NAME="FfxDriverDiskEnumerate"></a>
FfxDriverDiskEnumerate
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> <font class=ApiName>FfxDriverDiskEnumerate</font>(<br>&nbsp;&nbsp;&nbsp; 
    FFXDRIVERINFO  *pFDI,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>   hDisk)
</div>
<div class=SectionText>

    Enumerates the Disks in the system.  They are enumerated in
    "Disk number" order.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pFDI
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the FFXDRIVERINFO structure.  This
                value may be null to use the current driver
                data structure (this is done only to accommodate
                external API needs).
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The handle for the last Disk enumerated.  Set
                this to NULL to start the enumeration.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns the <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> value for the next Disk, or NULL
        if the enumeration is complete.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskFormatSettings"></a>
<a NAME="FfxDriverDiskFormatSettings"></a>
FfxDriverDiskFormatSettings
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskFormatSettings</font>(
    <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a>  *pConf)
</div>
<div class=SectionText>

    Initialize the Disk format settings from the developer specified
    configuration information in <a HREF=QF640_Headers.c.htm#ffxconf.h>ffxconf.h</a>.

<p>    This function supports up to 8 Disks by default, and is
    easily modified if the system needs to support more than
    that (<a HREF=QF160_ProjectSettings.c.htm#FFX_MAX_DISKS>FFX_MAX_DISKS</a> > 8).

<p>    Note that in some environments, portions of these settings
    may be specified via other means (such as the registry in
    Windows CE), and therefore #ifdef is used to ensure that
    only valid settings are configured.

<p>    Note also that because this function is used during the
    course of Disk creation, we must pass in a pointer to the
    FFXDISKINFO structure to use, rather than a Disk handle
    (since it is not known yet).

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pConf
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the <a HREF=QF660_Structures.c.htm#FFXDISKCONFIG>FFXDISKCONFIG</a> structure to use.
                The nDiskNum field must be filled in prior to
                calling this function.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> value indicating the operation result.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskGeometry"></a>
<a NAME="FfxDriverDiskGeometry"></a>
FfxDriverDiskGeometry
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskGeometry</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>       hDisk,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=QF660_Structures.c.htm#FFXDISKGEOMETRY>FFXDISKGEOMETRY</a>    *pGeometry)
</div>
<div class=SectionText>

    Report physical and logical geometry information for a Disk.

<p>    This geometry information includes physical information such as
    the erase block size, and the location within a Device a the Disk
    resides.

<p>    Emulated CHS values will be returned when they are available --
    check the fCHSValid flag to ensure they are valid.

<p>    Note that if an allocator is being used, the ulLogicalSectorCount
    value will be different than the total physical sectors you can
    calculate by using the the ulBlockCount, ulBlockSize, and
    nBytesPerSector fields.

<p>    If no allocator is being used then ulLogicalSectorCount will
    match the calculated physical sector count.

<p>    Note also that when an allocator is being used, that the
    ulLogicalSectorCount value may differ from the total sectors
    reported available by VBF due to the need to round down to make
    the CHS calculations work.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The Disk handle
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pGeometry
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the <a HREF=QF660_Structures.c.htm#FFXDISKGEOMETRY>FFXDISKGEOMETRY</a> structure
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> value indicating the operation result.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskHandle"></a>
<a NAME="FfxDriverDiskHandle"></a>
FfxDriverDiskHandle
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> <font class=ApiName>FfxDriverDiskHandle</font>(<br>&nbsp;&nbsp;&nbsp; 
    FFXDRIVERINFO  *pFDI,<br>&nbsp;&nbsp;&nbsp;
    unsigned        nDiskNum)
</div>
<div class=SectionText>

    Return the Disk handle for a given Disk number.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pFDI
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the FFXDRIVERINFO structure.  This
                   value may be null to use the current driver
                   data structure (this is done only to accommodate
                   external API needs).
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
nDiskNum
</td>
<td class=DefSep>-</td>
<td class=DefText>
The Disk number
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> value if successful, otherwise NULL.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskParameterGet"></a>
<a NAME="FfxDriverDiskParameterGet"></a>
FfxDriverDiskParameterGet
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskParameterGet</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>   hDisk,<br>&nbsp;&nbsp;&nbsp;
    FFXPARAM        id,<br>&nbsp;&nbsp;&nbsp;
    void           *pBuffer,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a>        ulBuffLen)
</div>
<div class=SectionText>

    Get a FlashFX system parameter.  If the parameter ID is not
    recognized for this layer, the request will be passed to the
    next lower software layer.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The Disk handle.  This may be NULL for certain
                    FXPARAM_... types which do not require it.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
id
</td>
<td class=DefSep>-</td>
<td class=DefText>
The parameter identifier (FFXPARAM_*).
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pBuffer
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the buffer in which to store the
                    value.  May be NULL which causes this function
                    to return the size of buffer required to store
                    the parameter.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
ulBuffLen
</td>
<td class=DefSep>-</td>
<td class=DefText>
The size of buffer.  May be zero if pBuffer is
                    NULL.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> code indicating success or failure.
        If pBuffer is NULL, but the id is valid, the returned
        <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> value will be decodeable using the macro
        DCLSTAT_GETUINT20, which will return the buffer length
        required to store the parameter.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskParameterset"></a>
<a NAME="FfxDriverDiskParameterset"></a>
FfxDriverDiskParameterset
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> FfxDriverDiskParameterSet(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>   hDisk,<br>&nbsp;&nbsp;&nbsp;
    FFXPARAM        id,<br>&nbsp;&nbsp;&nbsp;
    const void     *pBuffer,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a>        ulBuffLen)
</div>
<div class=SectionText>

    Set a FlashFX system parameter.  If the parameter ID is not
    recognized for this layer, the request will be passed to the
    next lower software layer.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The Disk handle.  This may be NULL for certain
                    FXPARAM_... types which do not require it.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
id
</td>
<td class=DefSep>-</td>
<td class=DefText>
The parameter identifier (FFXPARAM_*).
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pBuffer
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the parameter data.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
ulBuffLen
</td>
<td class=DefSep>-</td>
<td class=DefText>
The parameter data length.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns an <a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> code indicating success or failure.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskPowerResume"></a>
<a NAME="FfxDriverDiskPowerResume"></a>
FfxDriverDiskPowerResume
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskPowerResume</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>   hDisk,<br>&nbsp;&nbsp;&nbsp;
    unsigned        nPowerState)
</div>
<div class=SectionText>

    Indicate to the specified Disk that a power resume operation has
    occurred.

<p>    The nPowerState value is currently unused by the FlashFX call
    stack, but is provided for OEM use in the FIM or NTM as needed.
    Nevertheless it should be used with caution, as Datalight may
    use this value in the future.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The Disk handle
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
nPowerState
</td>
<td class=DefSep>-</td>
<td class=DefText>
The power state
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns a status code indicating the operation result.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskPowerSuspend"></a>
<a NAME="FfxDriverDiskPowerSuspend"></a>
FfxDriverDiskPowerSuspend
</h3>
<div class=Api>
<a HREF=QF660_Structures.c.htm#FFXSTATUS>FFXSTATUS</a> <font class=ApiName>FfxDriverDiskPowerSuspend</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>   hDisk,<br>&nbsp;&nbsp;&nbsp;
    unsigned        nPowerState)
</div>
<div class=SectionText>

    Prepare the specified Disk for a power suspend operation.  Note
    that if this Disk resides on a Device which is shared with other
    Disks, the actual call down the stack to the FIM/NTM's suspend
    function will <b>NOT</b> be issued until the last Disk receives the
    suspend request.

<p>    All I/O requests to the Disk must be completed, and no new
    requests issued, once this call has been made.

<p>    The nPowerState value is currently unused by the FlashFX call
    stack, but is provided for OEM use in the FIM or NTM as needed.
    Nevertheless it should be used with caution, as Datalight may
    use this value in the future.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The Disk handle
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
nPowerState
</td>
<td class=DefSep>-</td>
<td class=DefText>
The power state
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns a status code indicating the operation result.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="FfxDriverDiskPtr"></a>
<a NAME="FfxDriverDiskPtr"></a>
FfxDriverDiskPtr
</h3>
<div class=Api>
FFXDISKINFO * <font class=ApiName>FfxDriverDiskPtr</font>(
    <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a>    hDisk)
</div>
<div class=SectionText>

    Return a pointer to the FFXDISKINFO structure, given a Disk
    handle.

<p>    Note that typically the driver framework code simply
    dereferences the handle.  This function is provide as
    a convenience.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
hDisk
</td>
<td class=DefSep>-</td>
<td class=DefText>
The <a HREF=QF660_Structures.c.htm#FFXDISKHANDLE>FFXDISKHANDLE</a> to use
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        If successful, returns a pointer to the FFXDISKINFO structure
        for the Disk, or NULL otherwise.

<p>

</div>
</div>
</div>
<div class=Copy>Datalight FlashFX Tera SDK for Microsoft Windows CE<br>Copyright &#169; 1993-2012 Datalight, Inc.  All Rights Reserved Worldwide.</div>
</body>
</html>

