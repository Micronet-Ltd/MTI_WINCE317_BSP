<html>
<head>
<title>
Porting Guide: Advanced Considerations
</title>

<style type="text/css">

<!--
/*  TwinText Style (c) PTLogica 2002 - 2004  */

 
/* Body */
body{font-family:"Verdana", sans-serif;font-size: 8pt; }

/* Body (Chapter) */
body.Main{background: #FFFFFF;color: #000000;  margin: 0;       }

/*IE 5.5 */
li, table {  font-family: "Verdana", sans-serif; font-size: 8pt;  }

/* Project Title */
div.ProjectTitle {
	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
	color: White;
	text-align: left;
	padding-bottom: 3px;
}

/* Chapter's Title */
h1{font-family:"Verdana", sans-serif;font-size: 14px;
font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 9px;    padding-top: 15px;  padding-bottom: 15px;  padding-left: 10px;  background-color: #006699;  color: White;
 border-bottom: 4px solid Black;}
 
/* Feedback */
div.Feedback {
 	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
    text-align: right;
    margin: 0px;
    padding: 2px;
    background: #EFEFEF;
    position: relative; top: -10px; left: 0px;
} 

/* Common to all section text, including first section */
div.SectionText{margin-left: 10px;margin-right: 10px;margin-top: 10px;margin-bottom: 10px;   }

/* Contents or Summary */
h2{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 5px;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}

/* Table of Contents */
div.Toc{margin-top: 30px;margin-bottom: 30px;  border: 1px solid #CCCCCC;  padding: 5px;  margin-left: 30px;  margin-right: 30px;    }
div.TocLinks{font-weight: normal;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0pt;margin-bottom: 0pt;}
ul.TocLinks{}
li.TocLink{}
a.TocLink{}

/* Summary */
div.Summary{margin-top: 20px;margin-bottom: 40px;    padding: 5px;  margin-left: 30px;  margin-right: 20px; }
table.SummaryTable{  margin-top: 15px;  margin-bottom: 15px;  background-color: transparent;                   }
tr.SummaryRow { }
td.SummaryLink{font-weight: normal;text-align: left;width: 15%;        padding: 5px;             }
td.SummaryText{text-align: left;      padding: 5px;  background-color: transparent;  color: Black;                    }
a.SummaryLink{ }

/* Sections */
div.AllSections{margin-top: 0;margin-bottom: 70px;  margin-left: 0;  margin-right: 0;  }

div.Section{margin-top: 30px;margin-bottom: 10px;}
h3{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 10px;  padding-left: 10px;  padding-bottom: 3px;  background: #6699CC;  color: White;  border-bottom: 1px solid Black;     }

/* API Box */
div.Api{font-family:"Courier New", monospace;font-size: 9pt;margin-left: 15px;margin-right: 15px;margin-top: 15px;margin-bottom: 15px;padding: 7px;color: Black;  border: 1px solid #CCCCCC;  background: transparent;  }
font.ApiName{font-weight: bold;  background-color: transparent;  color: Black;  }

/* Section Text Elements */
h4{font-family:"Verdana", sans-serif;font-size: 9pt;font-weight: bold;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}
pre{font-family:"Courier New", monospace;font-size: 11px;white-space: pre;margin-top: 7pt;margin-bottom: 7pt;  border: 1px dashed #CCCCCC;  padding: 5px;  margin-left: 5px;  margin-right: 5px;  color: Black;     }
font.HighText{ background-color: #FFFF00; color: Black;  font-weight: normal;}
ul{}
li{list-style: disc;}
a:link{text-decoration:none;color: #005499;background: transparent;}
a:visited{text-decoration:none;color: #005499;background: transparent;}
a:active{text-decoration:none;color: #005499;background: transparent;}
a:hover{text-decoration:underline;color: #005499;background: transparent;}
	
	/* Definitions Table */
table.DefTable{ margin-left: 20px;  margin-right: 20px;   }
tr.Def{  }
td.Def{font-family:"Courier New", monospace;font-size: 9pt;  font-weight: normal;   padding-left: 5px;  padding-right: 5px;      color: Black;  vertical-align: top;  white-space: nowrap;  text-align: left;            }
td.DefSep{font-family:"Courier New", monospace;font-size: 9pt;padding-right: 5pt;padding-left: 5pt;  vertical-align: top;  text-align: center;  }
td.DefText{ vertical-align: top;  text-align: left;  }

/* Copyright */
div.Copy { padding: 10px;  }

/* Footer */
div.Footer{ border-top: 1px solid #CCCCCC;  margin-top: 10px;  padding: 5px;  border-bottom: 1px solid #CCCCCC;    }

div.SourceLocation{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-bottom: 10px;  margin-left: 10px;   }
div.LastGenerated{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-left: 40px;  }


/* Navigation */
body.Side{background: #6699CC;color: White;  margin: 0px;  padding: 0px;  }
div.Side{}
/* not well supported in some versions of IE; remove background color and bottom border */
/*div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: White;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  background-color: #006699;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 5px;  border-bottom: 4px solid Black;} */
div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: #000000;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 7px; }
div.SideText{text-align: left;margin-top: 0px;margin-bottom: 5px;  margin-left: 0px;  margin-right: 0px;  padding-bottom: 9px;    padding-left: 7px;  color: #FFCC00;  background: #6699CC;  padding-top: 10px;  font-weight: bold;               }
div.SideDetail { font-family: Arial, serif;  font-size: 10pt;  font-weight: normal;  background: transparent;    margin: 0px;  background-color: transparent;  padding-top: 1px;  color: White;                              }
ul.SideDetail{     }
li.SideDetail{ white-space: nowrap;  list-style: square;        }
a.SideDetail:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
table.LinksTable{margin-top: 10px;margin-bottom: 10px; padding-left: 7px;      }
tr.SideLink{}
td.SideLink{}
a.SideLink:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }







-->

</style>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="TwinText">

</head>
<body class=Main>
<h1>
Porting Guide: Advanced Considerations
</h1>
<div class=Feedback><a href="mailto:support@datalight.com?subject=Documentation Feedback: FlashFX Tera SDK for Microsoft Windows CE -- v2.1.1 Build 2128DF (Win32 Host): Porting Guide: Advanced Considerations">Send comments on this topic.</a></div>
<div class=SectionText>

        This section covers some of the more advanced issues that you may need
        to consider when configuring FlashFX Tera to your particular
        environment.  FlashFX comprises several components that provide the
        interface between a particular operating system or application and a
        flash memory array.

<p>        <h4>Hardware Interface Considerations</h4>

<p>        The main hardware consideration is the method used to access the flash
        memory.  The most common access method is to linearly map the flash
        memory into address space.  Systems with little address space may be
        paged or you may map a smaller window into the flash address space.
        This may be done in a system with extremely large arrays of flash
        memory.

<p>        <b>Memory Mapping</b>

<p>        Several options exist for mapping flash memory into address space.
        These options and their main features include:

<p>        Linear Memory Map
        <ul>
<li>Most simplistic implementation for NOR type flash memories.
        <li>Requires a large amount of address space; however, is not a problem with most flash arrays.
</ul>
        Paged Window Method
        <ul>
<li>Small memory page space requirements.
        <li>Some microcontrollers provide programmable chip select lines.
</ul>
        I/O Mapped
        <ul>
<li>Used for serial flashes such as UltraNAND, NAND, and AND flash technologies.
        <li>Smallest memory space requirements, as it only requires a few ports.
</ul>
        <b>Interleaving Flash Devices</b>

<p>        It is common in hardware design to interleave flash memory to obtain
        a larger bus width to the flash array.  In such an environment, the
        flash chips are wired in a way that each chip is assigned different
        sets of data lines.  For example, if 16-bit Intel Strata flash parts
        were placed in a fashion to obtain a 32-bit wide bus, the first flash
        chip would hold the even 16 bit words and the second chip would hold
        the odd 16-bit words.

<p>        The performance impacts would seem to be advantageous; however, due to
        the multitude of performance characteristics of flash memory, the
        results may be different from what you expected.

<p>        In general, the read performance will increase substantially since it
        will take the same amount of time to read twice the data (with two
        16-bit devices interleaved on a 32-bit bus).  Measurements of the write
        performance will also be faster, but, the size of the erasable zone
        will also double.  Measuring the performance of a single write of 512
        bytes, for instance, will generally be about twice that of a single
        device.

<p>        This doubling of an erase zone, however, has a negative impact on
        performance.  When a compaction occurs during a write to the flash
        disk, there will be as much as double the amount of data to move,
        creating a net gain of zero in performance impacts.

<p>        In short, interleaving may be desirable if your application is
        read-intensive, or occasionally writes only small blocks of data that
        must be completed quickly.  Interleaving may not be desired if the
        application is write-intensive, or writes are generally several
        kilobytes in size and must be as fast as possible.

<p>        <b>Removable Media</b>

<p>        Datalight does not promote the usage of removable flash array with
        FlashFX Tera due to existing and commercially available solutions.
        FlashFX uses a proprietary media format which is not compatible
        with other media management techniques commonly used with removable
        media.

<p>        <h4>Processor Specific Issues</h4>

<p>        <b>CPU Caches</b>

<p>        If the CPU or microcontroller is caching data, it may attempt to cache
        flash memory.  If it does, it may be necessary to disable the cache for
        access to the memory address space used by the flash memory, or
        temporarily disable the CPU cache during access to the flash to prevent
        problems in the programming algorithms.  Refer to the documentation for
        the CPU to determine if the CPU caches data accesses to and from memory.

<p>        Due to the way flash devices work, the data contained in the initial
        low-level memory write operation does not go to the flash memory
        itself.  Instead it goes to a state machine in the device that reflects
        the status of memory operations.  Once the initial write to the flash
        device is made and data is subsequently written to the flash array, the
        value of the data in the state machine can change to reflect the status
        of the write operation.  A subsequent low-level read operation of the
        flash device to obtain flash status data could hang the system if the
        CPU cached the original data contained in the initial low-level write
        operation.  In this situation, the CPU would provide previously
        written, (and now invalid) data, instead of providing the current
        status data.

<p>        <b>Byte Order</b>

<p>        FlashFX is designed such that its on-media metadata structures are
        always stored in little-endian byte order, regardless what the native
        architecture is.  This is not something that OEMs typically have to
        concern themselves with even when porting FlashFX to a completely new
        environment.

<p>        However, there is a peripheral issue concerning byte ordering which an
        OEM may have to deal with, and that is when the controller hardware,
        such as a NAND controller, expects things to be in a certain byte order,
        which may be different from the native byte order.

<p>
                                                                                                    
</div>
<div class=AllSections>
</div>
<div class=Copy>Datalight FlashFX Tera SDK for Microsoft Windows CE<br>Copyright &#169; 1993-2012 Datalight, Inc.  All Rights Reserved Worldwide.</div>
</body>
</html>

