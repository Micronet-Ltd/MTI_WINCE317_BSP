<html>
<head>
<title>
DCL Helper API: Atomic API
</title>

<style type="text/css">

<!--
/*  TwinText Style (c) PTLogica 2002 - 2004  */

 
/* Body */
body{font-family:"Verdana", sans-serif;font-size: 8pt; }

/* Body (Chapter) */
body.Main{background: #FFFFFF;color: #000000;  margin: 0;       }

/*IE 5.5 */
li, table {  font-family: "Verdana", sans-serif; font-size: 8pt;  }

/* Project Title */
div.ProjectTitle {
	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
	color: White;
	text-align: left;
	padding-bottom: 3px;
}

/* Chapter's Title */
h1{font-family:"Verdana", sans-serif;font-size: 14px;
font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 9px;    padding-top: 15px;  padding-bottom: 15px;  padding-left: 10px;  background-color: #006699;  color: White;
 border-bottom: 4px solid Black;}
 
/* Feedback */
div.Feedback {
 	font-style: italic;
	font-size: 8pt;
	font-weight: normal;
    text-align: right;
    margin: 0px;
    padding: 2px;
    background: #EFEFEF;
    position: relative; top: -10px; left: 0px;
} 

/* Common to all section text, including first section */
div.SectionText{margin-left: 10px;margin-right: 10px;margin-top: 10px;margin-bottom: 10px;   }

/* Contents or Summary */
h2{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 5px;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}

/* Table of Contents */
div.Toc{margin-top: 30px;margin-bottom: 30px;  border: 1px solid #CCCCCC;  padding: 5px;  margin-left: 30px;  margin-right: 30px;    }
div.TocLinks{font-weight: normal;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0pt;margin-bottom: 0pt;}
ul.TocLinks{}
li.TocLink{}
a.TocLink{}

/* Summary */
div.Summary{margin-top: 20px;margin-bottom: 40px;    padding: 5px;  margin-left: 30px;  margin-right: 20px; }
table.SummaryTable{  margin-top: 15px;  margin-bottom: 15px;  background-color: transparent;                   }
tr.SummaryRow { }
td.SummaryLink{font-weight: normal;text-align: left;width: 15%;        padding: 5px;             }
td.SummaryText{text-align: left;      padding: 5px;  background-color: transparent;  color: Black;                    }
a.SummaryLink{ }

/* Sections */
div.AllSections{margin-top: 0;margin-bottom: 70px;  margin-left: 0;  margin-right: 0;  }

div.Section{margin-top: 30px;margin-bottom: 10px;}
h3{font-family:"Verdana", sans-serif;font-size: 11pt;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 10px;  padding-left: 10px;  padding-bottom: 3px;  background: #6699CC;  color: White;  border-bottom: 1px solid Black;     }

/* API Box */
div.Api{font-family:"Courier New", monospace;font-size: 9pt;margin-left: 15px;margin-right: 15px;margin-top: 15px;margin-bottom: 15px;padding: 7px;color: Black;  border: 1px solid #CCCCCC;  background: transparent;  }
font.ApiName{font-weight: bold;  background-color: transparent;  color: Black;  }

/* Section Text Elements */
h4{font-family:"Verdana", sans-serif;font-size: 9pt;font-weight: bold;margin-left: 0pt;margin-right: 0pt;margin-top: 5pt;margin-bottom: 2pt;}
pre{font-family:"Courier New", monospace;font-size: 11px;white-space: pre;margin-top: 7pt;margin-bottom: 7pt;  border: 1px dashed #CCCCCC;  padding: 5px;  margin-left: 5px;  margin-right: 5px;  color: Black;     }
font.HighText{ background-color: #FFFF00; color: Black;  font-weight: normal;}
ul{}
li{list-style: disc;}
a:link{text-decoration:none;color: #005499;background: transparent;}
a:visited{text-decoration:none;color: #005499;background: transparent;}
a:active{text-decoration:none;color: #005499;background: transparent;}
a:hover{text-decoration:underline;color: #005499;background: transparent;}
	
	/* Definitions Table */
table.DefTable{ margin-left: 20px;  margin-right: 20px;   }
tr.Def{  }
td.Def{font-family:"Courier New", monospace;font-size: 9pt;  font-weight: normal;   padding-left: 5px;  padding-right: 5px;      color: Black;  vertical-align: top;  white-space: nowrap;  text-align: left;            }
td.DefSep{font-family:"Courier New", monospace;font-size: 9pt;padding-right: 5pt;padding-left: 5pt;  vertical-align: top;  text-align: center;  }
td.DefText{ vertical-align: top;  text-align: left;  }

/* Copyright */
div.Copy { padding: 10px;  }

/* Footer */
div.Footer{ border-top: 1px solid #CCCCCC;  margin-top: 10px;  padding: 5px;  border-bottom: 1px solid #CCCCCC;    }

div.SourceLocation{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-bottom: 10px;  margin-left: 10px;   }
div.LastGenerated{background: transparent;color: rgb(130,130,130);  font-size: 8pt;  margin-left: 40px;  }


/* Navigation */
body.Side{background: #6699CC;color: White;  margin: 0px;  padding: 0px;  }
div.Side{}
/* not well supported in some versions of IE; remove background color and bottom border */
/*div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: White;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  background-color: #006699;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 5px;  border-bottom: 4px solid Black;} */
div.SideTitle{font-family:"Verdana", sans-serif;font-size: 14px;color: #000000;font-weight: bold;text-align: left;margin-left: 0pt;margin-right: 0pt;margin-top: 0px;margin-bottom: 0px;  padding-top: 15px;  padding-bottom: 15px;  padding-left: 7px; }
div.SideText{text-align: left;margin-top: 0px;margin-bottom: 5px;  margin-left: 0px;  margin-right: 0px;  padding-bottom: 9px;    padding-left: 7px;  color: #FFCC00;  background: #6699CC;  padding-top: 10px;  font-weight: bold;               }
div.SideDetail { font-family: Arial, serif;  font-size: 10pt;  font-weight: normal;  background: transparent;    margin: 0px;  background-color: transparent;  padding-top: 1px;  color: White;                              }
ul.SideDetail{     }
li.SideDetail{ white-space: nowrap;  list-style: square;        }
a.SideDetail:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
a.SideDetail:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 12px; font-weight: bold; }
table.LinksTable{margin-top: 10px;margin-bottom: 10px; padding-left: 7px;      }
tr.SideLink{}
td.SideLink{}
a.SideLink:link { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:visited { text-decoration: none; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }
a.SideLink:hover { text-decoration: underline; color: #ffffff; font-family: Verdana, Arial, sans-serif; font-size: 11px; }







-->

</style>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="TwinText">

</head>
<body class=Main>
<h1>
DCL Helper API: Atomic API
</h1>
<div class=Feedback><a href="mailto:support@datalight.com?subject=Documentation Feedback: FlashFX Tera SDK for Microsoft Windows CE -- v2.1.1 Build 2128DF (Win32 Host): DCL Helper API: Atomic API">Send comments on this topic.</a></div>
<div class=SectionText>

    This module implements a generic Atomic API, which may be used as a
    default implementation for those environments where such services do
    not exist.

<p>    This code is NOT intended to be called directly by client code, but
    rather is called by the OS Services "Atomic" implementation (typically
    in osatomic.c).

<p>    The Atomic API is considered to be one of the lowest level primitive
    APIs, and as such does not rely on fancy things like dynamically
    allocated memory and mutexes (rather, those services rely on <this> API
    so that <they> can be thread-safe).

<p>    As such, this module uses the low level, statically allocated OS mutex,
    which must be provided by the OS Services mutex implementation.  In
    single-threaded environments, this is no big deal, as in most cases, the
    mutex implementation is going to be a simple pass-thru stub.  However,
    in more sophisticated multi-threaded environments, using a mutex is
    probably NOT the most efficient way to accomplish what is needed.  It is
    likely that the OS Services Atomic API implementation could be more
    optimally coded to use more efficient operating system services, or even
    assembly language.

<p>
                                                                                                    
</div>
<div class=Summary>
<h2>
Summary
</h2>
<table class=SummaryTable>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#DclAtomic32CompareExchange">DclAtomic32CompareExchange</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Perform an atomic comparison of the value at pulDestination with
    ulCompare.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#DclAtomic32Decrement">DclAtomic32Decrement</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Atomically decrement the specified variable and return the new
    value.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#DclAtomic32Exchange">DclAtomic32Exchange</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Atomically exchange two values.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#DclAtomic32ExchangeAdd">DclAtomic32ExchangeAdd</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Atomically add a one 32-bit value to another, and return the 
    original value.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#DclAtomic32Increment">DclAtomic32Increment</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Atomically increment the specified variable and return the new
    value.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#DclAtomicPtrCompareExchange">DclAtomicPtrCompareExchange</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Perform an atomic comparison of the pointer at pDestination with
    pCompare.
</td>
</tr>
<tr class=SummaryRow>
<td class=SummaryLink>
<a class=SummaryLink HREF="#DclAtomicPtrExchange">DclAtomicPtrExchange</a>&nbsp;&nbsp;
</td>
<td class=SummaryText valign=top>

    Atomically exchange two pointer values.
</td>
</tr>
</table>
</div>
<div class=AllSections>
<div class=Section>
<h3>
<a NAME="DclAtomic32CompareExchange"></a>
<a NAME="DclAtomic32CompareExchange"></a>
DclAtomic32CompareExchange
</h3>
<div class=Api>
<a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a> <font class=ApiName>DclAtomic32CompareExchange</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a>     *pulAtomic,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a>        ulCompare,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a>        ulExchange)
</div>
<div class=SectionText>

    Perform an atomic comparison of the value at pulDestination with
    ulCompare.  If the values are equal, ulExchange is stored in
    pulDestination.  If the values are not equal, no operation is
    performed.

<p>    The *pulAtomic value must be aligned on a 32-bit boundary.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pulAtomic
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the destination value
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
ulCompare
</td>
<td class=DefSep>-</td>
<td class=DefText>
The value to compare to *pulDestination
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
ulExchange
</td>
<td class=DefSep>-</td>
<td class=DefText>
The value to conditionally store
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns the original value at *pulDestination.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="DclAtomic32Decrement"></a>
<a NAME="DclAtomic32Decrement"></a>
DclAtomic32Decrement
</h3>
<div class=Api>
<a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a> <font class=ApiName>DclAtomic32Decrement</font>(
    <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a>     *pulAtomic)
</div>
<div class=SectionText>

    Atomically decrement the specified variable and return the new
    value.

<p>    The *pulAtomic value must be aligned on a 32-bit boundary.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pulAtomic
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to a <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a> value to decrement.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns the decremented value.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="DclAtomic32Exchange"></a>
<a NAME="DclAtomic32Exchange"></a>
DclAtomic32Exchange
</h3>
<div class=Api>
<a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a> <font class=ApiName>DclAtomic32Exchange</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a>     *pulAtomic,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a>        ulExchange)
</div>
<div class=SectionText>

    Atomically exchange two values.

<p>    The *pulAtomic value must be aligned on a 32-bit boundary.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pulAtomic
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to a <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a> location to modify.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
ulExchange
</td>
<td class=DefSep>-</td>
<td class=DefText>
The value to exchange with *pulAtomic.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns the original value at *pulAtomic.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="DclAtomic32ExchangeAdd"></a>
<a NAME="DclAtomic32ExchangeAdd"></a>
DclAtomic32ExchangeAdd
</h3>
<div class=Api>
<a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a> <font class=ApiName>DclAtomic32ExchangeAdd</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a>     *pulAtomic,<br>&nbsp;&nbsp;&nbsp;
    <a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a>        ulAdd)
</div>
<div class=SectionText>

    Atomically add a one 32-bit value to another, and return the 
    original value.

<p>    The *pulAtomic value must be aligned on a 32-bit boundary.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pulAtomic
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to a <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a> location to modify.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
ulAdd
</td>
<td class=DefSep>-</td>
<td class=DefText>
The value to add to *pulAtomic.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns the original value at *pulAtomic.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="DclAtomic32Increment"></a>
<a NAME="DclAtomic32Increment"></a>
DclAtomic32Increment
</h3>
<div class=Api>
<a HREF=UD660_DataTypes.c.htm#D_UINT32>D_UINT32</a> <font class=ApiName>DclAtomic32Increment</font>(
    <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a>     *pulAtomic)
</div>
<div class=SectionText>

    Atomically increment the specified variable and return the new
    value.

<p>    The *pulAtomic value must be aligned on a 32-bit boundary.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pulAtomic
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to a <a HREF=UD660_DataTypes.c.htm#D_ATOMIC32>D_ATOMIC32</a> value to increment.
</td>
</tr>
</table>

<p>
    <h4>Return Value</h4>
        Returns the incremented value.

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="DclAtomicPtrCompareExchange"></a>
<a NAME="DclAtomicPtrCompareExchange"></a>
DclAtomicPtrCompareExchange
</h3>
<div class=Api>
void * <font class=ApiName>DclAtomicPtrCompareExchange</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=UD660_DataTypes.c.htm#D_ATOMICPTR>D_ATOMICPTR</a>    *pDestination,<br>&nbsp;&nbsp;&nbsp;
    void           *pCompare,<br>&nbsp;&nbsp;&nbsp;
    void           *pExchange)
</div>
<div class=SectionText>

    Perform an atomic comparison of the pointer at pDestination with
    pCompare.  If the pointers are equal, pExchange is stored in
    pDestination.  If the pointers are not equal, no operation is
    performed.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pDestination
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the location which contains
                         the pointer value.  This must be aligned
                         on a native pointer-size boundary.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pCompare
</td>
<td class=DefSep>-</td>
<td class=DefText>
The pointer value to compare to with
                          pDestination.
</td>
</tr>
</table>

<p>

</div>
</div>
<div class=Section>
<h3>
<a NAME="DclAtomicPtrExchange"></a>
<a NAME="DclAtomicPtrExchange"></a>
DclAtomicPtrExchange
</h3>
<div class=Api>
void * <font class=ApiName>DclAtomicPtrExchange</font>(<br>&nbsp;&nbsp;&nbsp; 
    <a HREF=UD660_DataTypes.c.htm#D_ATOMICPTR>D_ATOMICPTR</a>    *pDestination,<br>&nbsp;&nbsp;&nbsp;
    void           *pExchange)
</div>
<div class=SectionText>

    Atomically exchange two pointer values.

<p>    <h4>Parameters</h4>
        
<p><table class=DefTable>
<tr class=Def>
<td class=Def>
pDestination
</td>
<td class=DefSep>-</td>
<td class=DefText>
A pointer to the location which contains
                         the pointer value.  This must be aligned
                         on a native pointer-size boundary.
</td>
</tr>

<p>        
<tr class=Def>
<td class=Def>
pExchange
</td>
<td class=DefSep>-</td>
<td class=DefText>
The pointer value to exchange with
                          pDestination.
</td>
</tr>
</table>

<p>

</div>
</div>
</div>
<div class=Copy>Datalight FlashFX Tera SDK for Microsoft Windows CE<br>Copyright &#169; 1993-2012 Datalight, Inc.  All Rights Reserved Worldwide.</div>
</body>
</html>

